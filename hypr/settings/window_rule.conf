# ============================================================
# Hyprland Window Rules (0.53+ syntax)
# - Converted old v2 rules to new windowrule syntax
# - Normalized spacing and matchers
# - Grouped and sorted
# ============================================================


# ----------------------------
# Global / Visual fixes
# ----------------------------

# Fix blurry dropdowns/menus (layer surfaces often have empty title/class)
windowrule = match:title ^()$, match:class ^()$, no_blur on

# Color border for any floating window
windowrule = match:float true, border_color rgb(A020F0)


# ----------------------------
# Steam (dropdown / menus)
# ----------------------------

# Keep Steam dropdown menus focused + avoid zero-sized popups
windowrule = match:title ^()$, match:class ^(steam)$, stay_focused on
windowrule = match:title ^()$, match:class ^(steam)$, min_size 1 1

# Put Steam (and steam-related windows) in special:Games
windowrule = match:class (.*)(steam)(.*), workspace special:Games


# ----------------------------
# CopyQ
# ----------------------------
windowrule = match:class ^(com\.github\.hluk\.copyq)$, float on
windowrule = match:class ^(com\.github\.hluk\.copyq)$, size 55% 65%
windowrule = match:class ^(com\.github\.hluk\.copyq)$, center on
windowrule = match:class ^(com\.github\.hluk\.copyq)$, stay_focused on



# ----------------------------
# Chat / Social workspaces
# ----------------------------

# Discord + Ferdium -> special:f8
windowrule = match:class (.*)(discord)(.*), workspace special:f8 silent
windowrule = match:class (.*)(ferdium)(.*), workspace special:f8 silent

# Remove hyprbars for Discord-family
# windowrule = match:class (.*)(discord)(.*), hyprbars:no_bar on


# ----------------------------
# Notes / Writing
# ----------------------------

# Obsidian -> special:f7 + no hyprbars
windowrule = match:class ^(obsidian)$, workspace special:f7 silent
# windowrule = match:class ^(obsidian)$, hyprbars:no_bar on


# ----------------------------
# Audio / Music
# ----------------------------

# Spotube -> float/size/center + special:f9
windowrule = match:class ^(spotube)$, float on
windowrule = match:class ^(spotube)$, size 85% 85%
windowrule = match:class ^(spotube)$, center on
windowrule = match:class ^(spotube)$, workspace special:f9 silent


# ----------------------------
# Terminals / Utilities (float helpers)
# ----------------------------

# Kitty
windowrule = match:class ^(kitty)$, float on
windowrule = match:class ^(kitty)$, center on
windowrule = match:class ^(kitty)$, size 80% 80%

# Common float utilities
windowrule = match:class ^(pavucontrol)$, float on
windowrule = match:class ^(blueman-manager)$, float on
windowrule = match:class ^(nm-connection-editor)$, float on

# GUI tools (converted from broken v1 "windowrule=float,class:...")
windowrule = match:class ^(nwg-look)$, float on
windowrule = match:class ^(gcolor3)$, float on
windowrule = match:class ^(galculator)$, float on
windowrule = match:class ^(franz)$, float on

# Calendar window by title
windowrule = match:title ^(Calendar)$, float on


# ----------------------------
# Title-based special behavior
# ----------------------------

# Any window with title "float" should float
windowrule = match:title ^(float)$, float on

# Splash title: remove hyprbars
# windowrule = match:title ^(splash)$, hyprbars:no_bar on


# ----------------------------
# Games
# ----------------------------

# CS2 rules (fixed invalid "class: class:" line)
windowrule = match:class ^(cs2)$, immediate on
windowrule = match:class ^(cs2)$, fullscreen on

# SuperTuxKart fullscreen
windowrule = match:class ^(supertuxcart)$, fullscreen on


# ----------------------------
# Animations / Opacity
# ----------------------------

# Alacritty opacity
windowrule = match:class ^(Alacritty)$, opacity 0.7 0.7

# Thunar animation + opacity (normalized spacing)
windowrule = match:class ^(thunar)$, animation popin
windowrule = match:class ^(thunar)$, opacity 0.9 0.9

# VS Code animation
windowrule = match:class ^(Code)$, animation popin


# ----------------------------
# Hyprbars exclusions
# ----------------------------

#windowrule = match:class ^(Alacritty)$, hyprbars:no_bar on
#windowrule = match:class ^(com\.github\.Aylur\.ags)$, hyprbars:no_bar on
#windowrule = match:class ^(com\.github\.rafostar\.Clapper)$, hyprbars:no_bar on

# CopyQ hyprbars exclusion (match both possible class names)
#windowrule = match:class ^(copyq)$, hyprbars:no_bar on
#windowrule = match:class ^(com\.github\.hluk\.copyq)$, hyprbars:no_bar on


# ----------------------------
# Layer rules
# ----------------------------
layerrule = blur on, match:namespace rofi
# layerrule = no_anim on, match:namespace rofi


# ----------------------------
# Workspace rules (unchanged)
# ----------------------------

workspace = special:f7, on-created-empty:obsidian

workspace = w[tv1], gapsout:0, gapsin:0
workspace = f[1], gapsout:0, gapsin:0
windowrule = match:float false, match:workspace w[tv1], border_size 0
windowrule = match:float false, match:workspace w[tv1], rounding 0
windowrule = match:float false, match:workspace f[1], border_size 0
windowrule = match:float false, match:workspace f[1], rounding 0


# ----------------------------
# Window Group setup
# ----------------------------

windowrule = match:class ^(thunar)$, group set
windowrule = match:class ^(Code)$, group set


# ----------------------------
# Dropped (invalid / v1-only / conflicting)
# ----------------------------

# windowrule = match:workspace special:QS, group set always
# (remove unless you confirm the exact syntax you want for grouping on a workspace)


# ------------------------------
# Grouping 
# --------------------------------
windowrule = match:workspace special:QS, group set always
